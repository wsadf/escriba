{"ast":null,"code":"import ApiContacts from '@/api/contacts';\nimport { mapActions, mapGetters, mapState } from 'vuex';\nimport { BAlert, BButton, BIcon, BListGroup, BModal, BSkeleton, VBTooltip } from 'bootstrap-vue';\nconst ModalDetails = () => import('./ModalDetails.vue');\nconst NotFoundContacts = () => import('./NotFoundContacts.vue');\nexport default {\n  name: 'ListContacts',\n  components: {\n    BAlert,\n    BButton,\n    BIcon,\n    BListGroup,\n    BModal,\n    BSkeleton,\n    ModalDetails,\n    NotFoundContacts\n  },\n  directives: {\n    'b-tooltip': VBTooltip\n  },\n  data() {\n    return {\n      deleteError: false,\n      detailModal: false,\n      detailId: 0,\n      idContactDelete: 0,\n      modalDelete: false,\n      noContacts: false,\n      txtModalDelete: \"Tem certeza que quer apagar este contato?\",\n      txtModalDeleteError: \"Não foi possível excluir o contato, tente novamente.\"\n    };\n  },\n  computed: {\n    ...mapGetters(['namesList']),\n    ...mapState(['contacts', 'listLoading'])\n  },\n  watch: {\n    listLoading(value) {\n      if (value === false && this.contacts.length === 0) {\n        this.noContacts = true;\n      }\n    }\n  },\n  created() {\n    this.setLoading(true);\n    this.getAllContacts();\n  },\n  methods: {\n    ...mapActions(['getAllContacts', 'removeContact', 'setLoading']),\n    async deleteContact() {\n      this.modalDelete = false;\n      this.setLoading(true);\n      await ApiContacts.deleteContact(this.idContactDelete).then(() => {\n        this.removeContact({\n          id: this.idContactDelete,\n          contacts: this.contacts\n        });\n      }).catch(() => {\n        this.modalDelete = true;\n        this.deleteError = true;\n      }).finally(() => {\n        this.setLoading(false);\n      });\n    },\n    openModalDelete(id) {\n      this.deleteError = false;\n      this.modalDelete = true;\n      this.idContactDelete = id;\n    },\n    openModalDetail(id) {\n      this.detailModal = true;\n      this.detailId = id;\n    }\n  }\n};","map":{"version":3,"names":["ApiContacts","mapActions","mapGetters","mapState","BAlert","BButton","BIcon","BListGroup","BModal","BSkeleton","VBTooltip","ModalDetails","NotFoundContacts","name","components","directives","data","deleteError","detailModal","detailId","idContactDelete","modalDelete","noContacts","txtModalDelete","txtModalDeleteError","computed","watch","listLoading","value","contacts","length","created","setLoading","getAllContacts","methods","deleteContact","then","removeContact","id","catch","finally","openModalDelete","openModalDetail"],"sources":["src/components/ListContacts.vue"],"sourcesContent":["<template>\n\t<div class=\"mt-5\">\n\t\t<template v-if=\"listLoading\">\n\t\t\t<b-skeleton\n\t\t\t\tv-for=\"index in 5\" :key=\"index\"\n\t\t\t\tclass=\"my-3\"\n\t\t\t\ttype=\"input\"\n\t\t\t/>\n\t\t</template>\n\t\t<template v-else>\n\t\t\t<b-list-group v-if=\"contacts.length > 0\">\n\t\t\t\t<b-list-group-item\n\t\t\t\t\tv-for=\"item in namesList\"\n\t\t\t\t\t:key=\"item.id\"\n\t\t\t\t\tclass=\"d-flex justify-content-between align-items-center py-3\"\n\t\t\t\t>\n\t\t\t\t\t<p class=\"mb-0\">\n\t\t\t\t\t\t{{ item.name }}c\n\t\t\t\t\t</p>\n\t\t\t\t\t<div class=\"pl-2 d-flex\">\n\t\t\t\t\t\t<b-button\n\t\t\t\t\t\t\tvariant=\"outline-success\"\n\t\t\t\t\t\t\tv-b-tooltip.hover.v-success\n\t\t\t\t\t\t\ttitle=\"Visualizar\"\n\t\t\t\t\t\t\t@click=\"openModalDetail(item.id)\"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<b-icon icon=\"eye\" />\n\t\t\t\t\t\t</b-button>\n\t\t\t\t\t\t<b-button\n\t\t\t\t\t\t\tvariant=\"outline-primary\"\n\t\t\t\t\t\t\tclass=\"mx-2\"\n\t\t\t\t\t\t\tv-b-tooltip.hover.v-primary\n\t\t\t\t\t\t\ttitle=\"Editar\"\n\t\t\t\t\t\t\t:to=\"`edit/${item.id}`\"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<b-icon icon=\"pencil-square\" />\n\t\t\t\t\t\t</b-button>\n\t\t\t\t\t\t<b-button\n\t\t\t\t\t\t\tvariant=\"outline-danger\"\n\t\t\t\t\t\t\tv-b-tooltip.hover.v-danger\n\t\t\t\t\t\t\ttitle=\"Excluir\"\n\t\t\t\t\t\t\t@click=\"openModalDelete(item.id)\"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<b-icon icon=\"trash\" />\n\t\t\t\t\t\t</b-button>\n\t\t\t\t\t</div>\n\n\t\t\t\t</b-list-group-item>\n\t\t\t</b-list-group>\n\t\t\t<not-found-contacts v-else />\n\t\t</template>\n\n\t\t<b-modal\n\t\t\tv-model=\"modalDelete\"\n\t\t\thideHeaderClose\n\t\t>\n\t\t\t<b-alert v-if=\"deleteError\" variant=\"danger\" show class=\"mb-0\">\n\t\t\t\t<p class=\"mb-0\">{{ txtModalDeleteError }}</p>\n      </b-alert>\n\t\t\t<p v-else class=\"mb-0\">{{ txtModalDelete }}</p>\n\n\t\t\t<template #modal-footer>\n\t\t\t\t<b-button\n\t\t\t\t\tv-if=\"!deleteError\"\n\t\t\t\t\tvariant=\"success\"\n\t\t\t\t\t@click=\"deleteContact()\"\n\t\t\t\t>\n\t\t\t\t\tSim\n\t\t\t\t</b-button>\n\t\t\t\t<b-button\n\t\t\t\t\t:variant=\"deleteError ? 'success' : 'danger'\"\n\t\t\t\t\t@click=\"modalDelete = false\"\n\t\t\t\t>\n\t\t\t\t\t<template v-if=\"deleteError\">Ok</template>\n\t\t\t\t\t<template v-else>Não</template>\n\t\t\t\t</b-button>\n\t\t\t</template>\n\t\t</b-modal>\n\n\t\t<modal-details\n\t\t\tv-if=\"detailModal\"\n\t\t\t:id=\"detailId\"\n\t\t\t:showModal=\"detailModal\"\n\t\t\t@change=\"value => detailModal = value\"\n\t\t/>\n\t</div>\n</template>\n\n<script>\nimport ApiContacts from '@/api/contacts'\n\nimport { mapActions, mapGetters, mapState } from 'vuex';\nimport { BAlert, BButton, BIcon, BListGroup, BModal, BSkeleton, VBTooltip } from 'bootstrap-vue'\n\nconst ModalDetails = () => import('./ModalDetails.vue');\nconst NotFoundContacts = () => import('./NotFoundContacts.vue');\n\nexport default {\n\tname: 'ListContacts',\n\n  components: {\n\t\tBAlert,\n\t\tBButton,\n\t\tBIcon,\n\t\tBListGroup,\n\t\tBModal,\n\t\tBSkeleton,\n\t\tModalDetails,\n\t\tNotFoundContacts,\n  },\n\n\tdirectives: { 'b-tooltip': VBTooltip },\n\n\tdata() {\n\t\treturn {\n\t\t\tdeleteError: false,\n\t\t\tdetailModal: false,\n\t\t\tdetailId: 0,\n\t\t\tidContactDelete: 0,\n\t\t\tmodalDelete: false,\n\t\t\tnoContacts: false,\n\t\t\ttxtModalDelete: \"Tem certeza que quer apagar este contato?\",\n\t\t\ttxtModalDeleteError: \"Não foi possível excluir o contato, tente novamente.\"\n\t\t}\n\t},\n\n\tcomputed: {\n    ...mapGetters(['namesList']),\n    ...mapState(['contacts', 'listLoading']),\n\t},\n\n\twatch: {\n\t\tlistLoading(value) {\n\t\t\tif (value === false && this.contacts.length === 0) {\n\t\t\t\tthis.noContacts = true;\n\t\t\t}\n\t\t}\n\t},\n\n\tcreated () {\n\t\tthis.setLoading(true);\n\t\tthis.getAllContacts();\n\t},\n\n\tmethods: {\n    ...mapActions(['getAllContacts', 'removeContact', 'setLoading']),\n\n\t\tasync deleteContact() {\n\t\t\tthis.modalDelete = false;\n\t\t\tthis.setLoading(true);\n\n\t\t\tawait ApiContacts.deleteContact(this.idContactDelete)\n        .then(() => {\n\t\t\t\t\tthis.removeContact({ id: this.idContactDelete, contacts: this.contacts });\n\t\t\t\t})\n        .catch(() => {\n\t\t\t\t\tthis.modalDelete = true;\n\t\t\t\t\tthis.deleteError = true;\n\t\t\t\t})\n        .finally(() => {\n\t\t\t\t\tthis.setLoading(false);\n\t\t\t\t})\n\t\t},\n\n\t\topenModalDelete(id) {\n\t\t\tthis.deleteError = false;\n\t\t\tthis.modalDelete = true;\n\t\t\tthis.idContactDelete = id;\n\t\t},\n\n\t\topenModalDetail(id) {\n\t\t\tthis.detailModal = true;\n\t\t\tthis.detailId = id;\n\t\t},\n\t},\n}\n</script>\n"],"mappings":"AAyFA,OAAAA,WAAA;AAEA,SAAAC,UAAA,EAAAC,UAAA,EAAAC,QAAA;AACA,SAAAC,MAAA,EAAAC,OAAA,EAAAC,KAAA,EAAAC,UAAA,EAAAC,MAAA,EAAAC,SAAA,EAAAC,SAAA;AAEA,MAAAC,YAAA,GAAAA,CAAA;AACA,MAAAC,gBAAA,GAAAA,CAAA;AAEA;EACAC,IAAA;EAEAC,UAAA;IACAV,MAAA;IACAC,OAAA;IACAC,KAAA;IACAC,UAAA;IACAC,MAAA;IACAC,SAAA;IACAE,YAAA;IACAC;EACA;EAEAG,UAAA;IAAA,aAAAL;EAAA;EAEAM,KAAA;IACA;MACAC,WAAA;MACAC,WAAA;MACAC,QAAA;MACAC,eAAA;MACAC,WAAA;MACAC,UAAA;MACAC,cAAA;MACAC,mBAAA;IACA;EACA;EAEAC,QAAA;IACA,GAAAvB,UAAA;IACA,GAAAC,QAAA;EACA;EAEAuB,KAAA;IACAC,YAAAC,KAAA;MACA,IAAAA,KAAA,mBAAAC,QAAA,CAAAC,MAAA;QACA,KAAAR,UAAA;MACA;IACA;EACA;EAEAS,QAAA;IACA,KAAAC,UAAA;IACA,KAAAC,cAAA;EACA;EAEAC,OAAA;IACA,GAAAjC,UAAA;IAEA,MAAAkC,cAAA;MACA,KAAAd,WAAA;MACA,KAAAW,UAAA;MAEA,MAAAhC,WAAA,CAAAmC,aAAA,MAAAf,eAAA,EACAgB,IAAA;QACA,KAAAC,aAAA;UAAAC,EAAA,OAAAlB,eAAA;UAAAS,QAAA,OAAAA;QAAA;MACA,GACAU,KAAA;QACA,KAAAlB,WAAA;QACA,KAAAJ,WAAA;MACA,GACAuB,OAAA;QACA,KAAAR,UAAA;MACA;IACA;IAEAS,gBAAAH,EAAA;MACA,KAAArB,WAAA;MACA,KAAAI,WAAA;MACA,KAAAD,eAAA,GAAAkB,EAAA;IACA;IAEAI,gBAAAJ,EAAA;MACA,KAAApB,WAAA;MACA,KAAAC,QAAA,GAAAmB,EAAA;IACA;EACA;AACA"},"metadata":{},"sourceType":"module","externalDependencies":[]}